import{t as g,B as b,C as v,_ as w,c as r,o as c,a as s,F as h,r as p,n as y,z as _}from"./index-BjY1_Egx.js";var C=Object.getOwnPropertyDescriptor,k=(e,t,o,a)=>{for(var n=a>1?void 0:a?C(t,o):t,d=e.length-1,l;d>=0;d--)(l=e[d])&&(n=l(n)||n);return n};function m(e){return Array.from(e).reduce((t,o)=>(t+o.charCodeAt(0)*65535)%22859,0)/22859}let u=class extends b{photos;photoRows;async created(){this.photos=await(await fetch("https://p.aza.moe/photos")).json(),this.photos.sort((o,a)=>o.exif.DateTime<a.exif.DateTime?1:-1);let e={1:0,2:.3,3:.5};this.photoRows=[];let t=[];this.photos.forEach(o=>{t.length===0?t.push(o):t.length>=3?(this.photoRows.push(t),t=[o]):m(o.original_photo)<e[t.length]?(this.photoRows.push(t),t=[o]):t.push(o)}),t.length>0&&this.photoRows.push(t)}url(e){return e=e.replace("data/photos","static").replace("./",""),`https://p.aza.moe/${e}`}randomRotation(e){return`rotate(${m(e)*20-10}deg)`}async clickPhoto(e,t){console.log("Clicked photo:",e.id);const o=t.currentTarget,a=o.querySelector(".photo-wrapper");a.style.viewTransitionName=`photo-${e.id}`,await document.startViewTransition(()=>{o.classList.toggle("active"),document.getElementsByClassName("blur")[0].toggleAttribute("hidden")}).finished,a.style.viewTransitionName=""}};u=k([v({})],u);const R=g(u),T="/thumb%20tack%202%20plain.png",$={class:"outer-grid"},j=["onClickCapture"],B=["src","alt"],P={class:"photo-abs-container",absolute:"","inset-0":"",flex:"","justify-center":"","items-center":""},z=["src","alt"];function x(e,t,o,a,n,d){return c(),r(h,null,[t[1]||(t[1]=s("div",{class:"title"},[s("div",{class:"font-script-en bold"},"The Wandering Gallery"),s("div",{class:"subtitle <sm:hidden"},"想要把旅行中用相机拍到好看照片时的喜悦分享给照片里出现的路人，所以买了便携照片打印机、搭了这个网页！")],-1)),s("div",$,[(c(!0),r(h,null,p(e.photoRows,l=>(c(),r("div",{key:l[0].id,flex:"","justify-center":"",class:y(`grid-cols-${l.length}`)},[(c(!0),r(h,null,p(l,i=>(c(),r("div",{key:i.id,onClickCapture:async f=>await e.clickPhoto(i,f),class:"img-container","cursor-pointer":""},[s("img",{class:"photo","w-full":"","h-full":"","object-contain":"","opacity-0":"",src:e.url(i.thumbnail_edited),alt:i.id},null,8,B),s("div",P,[s("div",{class:"photo-wrapper",style:_({transform:e.randomRotation(i.id)})},[s("img",{class:"photo","w-full":"","object-contain":"",src:e.url(i.thumbnail_edited),alt:i.id},null,8,z)],4)]),t[0]||(t[0]=s("div",{flex:"","w-full":"","justify-center":"",absolute:"","position-top-none":""},[s("img",{class:"pin",src:T,alt:""})],-1))],40,j))),128))],2))),128))]),t[2]||(t[2]=s("div",{class:"blur",hidden:"","pos-fixed":"","inset-0":"","backdrop-blur-sm":"","z-5":""},null,-1))],64)}const D=w(R,[["render",x],["__scopeId","data-v-c3e8ba1e"]]);export{D as default};
